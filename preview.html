<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snow Report Mountain SVG Preview</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    h1 {
      color: #333;
      margin-top: 0;
    }
    h2 {
      color: #666;
      font-size: 18px;
      margin-top: 30px;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 10px;
    }
    .last-update {
      font-size: 12px;
      color: #999;
      text-align: right;
      margin-bottom: 10px;
    }
    svg {
      display: block;
      margin: 0 auto;
    }
    .controls {
      margin-top: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 4px;
    }
    .control-group {
      margin-bottom: 15px;
    }
    label {
      display: inline-block;
      width: 180px;
      font-weight: 600;
      color: #555;
    }
    input[type="number"] {
      width: 100px;
      padding: 5px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    input[type="color"] {
      width: 60px;
      height: 30px;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
    }
    .theme-toggle {
      margin: 20px 0;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      background: #03a9f4;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background: #0288d1;
    }
    body.dark {
      background: #1a1a1a;
      color: #e0e0e0;
    }
    body.dark .card {
      background: #2c2c2c;
    }
    body.dark h1, body.dark h2 {
      color: #e0e0e0;
    }
    body.dark .controls {
      background: #333;
    }
    body.dark svg text {
      fill: #e0e0e0;
    }
    body.dark svg line,
    body.dark svg circle {
      stroke: #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Snow Report Mountain Graphic Preview</h1>
    <p>This is a preview of the SVG mountain visualization for the Home Assistant Lovelace card.</p>
    
    <div class="theme-toggle">
      <button onclick="toggleTheme()">Toggle Dark/Light Theme</button>
    </div>

    <div class="controls">
      <h2>Adjust Values</h2>
      
      <div class="control-group">
        <label>Mountain Snow (cm):</label>
        <input type="number" id="mountainSnow" value="80" min="0" max="500" onchange="updateSVG()">
      </div>
      
      <div class="control-group">
        <label>Valley Snow (cm):</label>
        <input type="number" id="valleySnow" value="40" min="0" max="500" onchange="updateSVG()">
      </div>
      
      <div class="control-group">
        <label>Mountain Elevation (m):</label>
        <input type="number" id="mountainElevation" value="2225" min="0" max="5000" onchange="updateSVG()">
      </div>
      
      <div class="control-group">
        <label>Valley Elevation (m):</label>
        <input type="number" id="valleyElevation" value="1130" min="0" max="5000" onchange="updateSVG()">
      </div>
      
      <div class="control-group">
        <label>Mountain Color:</label>
        <input type="color" id="mountainColor" value="#D3D3D3" onchange="updateSVG()">
      </div>
      
      <div class="control-group">
        <label>Snow Color:</label>
        <input type="color" id="snowColor" value="#FFFFFF" onchange="updateSVG()">
      </div>
    </div>

    <h2>Preview</h2>
    <div class="last-update">laatste update: 1 februari 2026</div>
    <div id="svgContainer"></div>
  </div>

  <script>
    function generateMountainSVG(data) {
      const { mountainSnow, valleySnow, mountainElevation, valleyElevation, mountainColor, snowColor } = data;
      const svgNS = 'http://www.w3.org/2000/svg';

      // Create root SVG element
      const svg = document.createElementNS(svgNS, 'svg');
      svg.setAttribute('viewBox', '0 0 500 300');
      svg.setAttribute('xmlns', svgNS);
      svg.setAttribute('style', 'width: 100%; height: auto; max-height: 300px;');
      svg.setAttribute('role', 'img');
      svg.setAttribute('aria-label', 'Mountain snow report visualization');

      // Group
      const g = document.createElementNS(svgNS, 'g');
      g.setAttribute('id', 'Snowfall');
      g.setAttribute('transform', 'translate(2.000000, 81.000000)');
      svg.appendChild(g);

      // Mountain path
      const mountainPath = document.createElementNS(svgNS, 'path');
      mountainPath.setAttribute('id', 'Page-1');
      mountainPath.setAttribute('d', 'M211.483865,16 L135.799805,164.239258 L347.929688,164.239258 L299.238237,99.3686221 L259.749149,138.857349 L257.167107,134.871781 L277.710029,114.708816 L211.483865,16 Z M212.359375,29.359375 L250.58604,87.463927 L229.37207,67.8369141 L225.604998,91.8886841 L214.416016,65.5478516 L205.131836,90.3828125 L197.766602,69.4726565 L187.387695,77.2480471 L212.359375,29.359375 Z');
      mountainPath.setAttribute('fill', mountainColor);
      mountainPath.setAttribute('transform', 'translate(241.864746, 90.119629) scale(-1, 1) translate(-241.864746, -90.119629) ');
      g.appendChild(mountainPath);

      // Lines
      const line1 = document.createElementNS(svgNS, 'path');
      line1.setAttribute('id', 'Line');
      line1.setAttribute('d', 'M273.17481,18.5 L91.4057823,18.5');
      line1.setAttribute('stroke', '#999999');
      line1.setAttribute('stroke-linecap', 'square');
      g.appendChild(line1);

      const line2 = document.createElementNS(svgNS, 'path');
      line2.setAttribute('id', 'Line-Copy-27');
      line2.setAttribute('d', 'M204.999998,114.5 L91.4057823,114.5');
      line2.setAttribute('stroke', '#999999');
      line2.setAttribute('stroke-linecap', 'square');
      g.appendChild(line2);

      // Snow markers
      const circleTop = document.createElementNS(svgNS, 'circle');
      circleTop.setAttribute('id', 'Oval-19');
      circleTop.setAttribute('stroke', '#2F619B');
      circleTop.setAttribute('stroke-width', '2');
      circleTop.setAttribute('fill', snowColor);
      circleTop.setAttribute('cx', '272');
      circleTop.setAttribute('cy', '18');
      circleTop.setAttribute('r', '6');
      g.appendChild(circleTop);

      const snowPath = document.createElementNS(svgNS, 'path');
      snowPath.setAttribute('id', 'Oval-19-Copy');
      snowPath.setAttribute('d', 'M204,120 C207.313708,120 210,117.313708 210,114 C210,110.686292 207.313708,108 204,108 C200.686292,108 198,110.686292 198,114 C198,117.313708 200.686292,120 204,120 Z');
      snowPath.setAttribute('stroke', '#2F619B');
      snowPath.setAttribute('stroke-width', '2');
      snowPath.setAttribute('fill', snowColor);
      g.appendChild(snowPath);

      // Helper to create text with a single tspan
      function createText(id, fontSize, fontWeight, fill, extraAttrs, tspanX, tspanY, textValue, textAnchor) {
        const textEl = document.createElementNS(svgNS, 'text');
        textEl.setAttribute('id', id);
        textEl.setAttribute('font-size', String(fontSize));
        textEl.setAttribute('font-weight', fontWeight);
        textEl.setAttribute('fill', fill);
        if (textAnchor) {
          textEl.setAttribute('text-anchor', textAnchor);
        }
        if (extraAttrs) {
          Object.keys(extraAttrs).forEach(function (key) {
            textEl.setAttribute(key, extraAttrs[key]);
          });
        }
        const tspan = document.createElementNS(svgNS, 'tspan');
        tspan.setAttribute('x', String(tspanX));
        tspan.setAttribute('y', String(tspanY));
        tspan.textContent = textValue;
        textEl.appendChild(tspan);
        return textEl;
      }

      // Heights and snow amounts
      const mountainElevationText = createText(
        'height-top',
        12,
        'normal',
        '#999999',
        { 'line-spacing': '22' },
        90.5,
        30,
        mountainElevation !== null ? mountainElevation + 'm' : '—'
      );
      g.appendChild(mountainElevationText);

      const valleyElevationText = createText(
        'height-valley',
        12,
        'normal',
        '#999999',
        { 'line-spacing': '22' },
        91,
        124.5,
        valleyElevation !== null ? valleyElevation + 'm' : '—'
      );
      g.appendChild(valleyElevationText);

      const mountainSnowText = createText(
        'snowheight-top',
        24,
        '600',
        '#424242',
        null,
        80,
        25,
        mountainSnow !== null ? mountainSnow + 'cm' : '--',
        'end'
      );
      g.appendChild(mountainSnowText);

      const valleySnowText = createText(
        'snowheight-valley',
        21,
        '600',
        '#424242',
        { 'line-spacing': '30' },
        79,
        120,
        valleySnow !== null ? valleySnow + 'cm' : '--',
        'end'
      );
      g.appendChild(valleySnowText);

      return svg;
    }

    function updateSVG() {
      const data = {
        mountainSnow: parseInt(document.getElementById('mountainSnow').value),
        valleySnow: parseInt(document.getElementById('valleySnow').value),
        mountainElevation: parseInt(document.getElementById('mountainElevation').value),
        valleyElevation: parseInt(document.getElementById('valleyElevation').value),
        mountainColor: document.getElementById('mountainColor').value,
        snowColor: document.getElementById('snowColor').value,
      };
      
      const container = document.getElementById('svgContainer');
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
      container.appendChild(generateMountainSVG(data));
    }

    function toggleTheme() {
      document.body.classList.toggle('dark');
      updateSVG();
    }

    // Initialize
    updateSVG();
  </script>
</body>
</html>
